<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/actors/zombie.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/render.js~Render.html">Render</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/status.js~Status.html">Status</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/sublevel.js~Sublevel.html">Sublevel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/unstick.js~Unstick.html">Unstick</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/vector.js~Vector.html">Vector</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-animate">animate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clearIntroScreen">clearIntroScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clearLoseScreen">clearLoseScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-clearWinScreen">clearWinScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-displayIntroScreen">displayIntroScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-displayLoseScreen">displayLoseScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-displayWinScreen">displayWinScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-restartOnLose">restartOnLose</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-restartOnWin">restartOnWin</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-waitToStart">waitToStart</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-audio">audio</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-actorChars">actorChars</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-obstacleChars">obstacleChars</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-scale">scale</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-settings">settings</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">actors</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/door.js~Door.html">Door</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/flag.js~Flag.html">Flag</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/ladder.js~Ladder.html">Ladder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/pizza.js~Pizza.html">Pizza</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/player.js~Player.html">Player</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/spider.js~Spider.html">Spider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/sword.js~Sword.html">Sword</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/actors/zombie.js~Zombie.html">Zombie</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">decorations</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-decorationsBackground01">decorationsBackground01</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-decorationsForeround01">decorationsForeround01</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-decorationsBackground02">decorationsBackground02</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-decorationsForeground02">decorationsForeground02</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">maps</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-map01">map01</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-map02">map02</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/actors/zombie.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import Vector from &apos;../vector&apos;;
import Unstick from &apos;../unstick&apos;;

/**
 * A zombie enemy.
 */
class Zombie {
  constructor(pos, type) {
    this.pos = pos;
    this.images = { walking: &apos;images/enemies/zombie/walking-01.png&apos; };
    this.direction = &apos;right&apos;;
    this.zombieCounter = 0;
    this.size = new Vector(2.5, 4.5);
    this.unstick = new Unstick;
    this.lifeMeter = 5;
    this.type = &apos;zombie&apos;;
    this.actorType = &apos;enemy&apos;;
    this.action = { walking: true };
    this.speed = new Vector(3, 0);
    this.timers = { walking: 0 };
    this.coords = {
      left: this.pos.x,
      right: this.pos.x + this.size.x,
      top: this.pos.y,
      bottom: this.pos.y + this.size.y,
    };
    this.spritePos = { x: 0, y: 0 };
    this.spritePositions = {
      walking: [
        { x: 0, y: 0 },
        { x: 0, y: -75 },
        { x: 0, y: -150 },
        { x: 0, y: -225 },
        { x: 0, y: -300 },
      ],
    };
  }

  act(step, sublevel) {
    this.moveX(step, sublevel);
    this.moveY(step, sublevel);
  }

  imageSwap({ bounds, type }) {
    let counter = 0;
    let addZero = false;
    bounds.forEach((image) =&gt; {
      counter += 1;
      if (counter.toString().length === 1) {
        addZero = true;
      }
      if ((this.timers[type] &gt;= image.lowerBound) &amp;&amp;
      (this.timers[type] &lt;= image.upperBound)) {
        // -------------------------------------------------------
        // Temp shim for running
        if (type === &apos;walking&apos;) {
          if (counter === 1) { this.spritePos = this.spritePositions.walking[0]; }
          if (counter === 2) { this.spritePos = this.spritePositions.walking[1]; }
          if (counter === 3) { this.spritePos = this.spritePositions.walking[2]; }
          if (counter === 4) { this.spritePos = this.spritePositions.walking[3]; }
          if (counter === 5) { this.spritePos = this.spritePositions.walking[4]; }
        }
      }
    }, this);
  }

  moveX(step, sublevel) {
    const self = this;
    const newPos = this.pos;
    newPos.x = this.pos.x + this.speed.times(step).x;
    const xAxisObstacle = sublevel.obstacleAt(newPos, this.size, &apos;x&apos;);
    const actorsLeftPos = Math.floor(this.pos.x);
    const actorsRightPos = Math.ceil(this.pos.x + this.size.x);
    const actorsTopPos = Math.floor(this.pos.y);
    const actorsBottomPos = Math.ceil(this.pos.y + this.size.y);
    const leftSublevelEnd = actorsLeftPos &lt; 0;
    const rightSublevelEnd = actorsRightPos &gt; sublevel.width;
    const topSublevelEnd = actorsTopPos &lt; 0;
    this.timers.walking += 1;
    this.timers.walking === 40 ?
      this.timers.walking = 0 :
      this.timers.walking = this.timers.walking;
    self.imageSwap({
      type: &apos;walking&apos;,
      bounds: [
        { lowerBound: 0, upperBound: 7 },
        { lowerBound: 8, upperBound: 15 },
        { lowerBound: 16, upperBound: 23 },
        { lowerBound: 24, upperBound: 31 },
        { lowerBound: 32, upperBound: 39 },
      ],
    });
    if ((sublevel.player.pos.y &gt;= this.pos.y) &amp;&amp;  (sublevel.player.pos.y &lt;= this.pos.y + 2))  {
      if ((sublevel.player.pos.x &gt; this.pos.x - 200) || (sublevel.player.pos.x &lt; this.pos.x + 200)) {
        let playersDirection;
        if (sublevel.player.pos.x &lt; this.pos.x) {
          playersDirection = &apos;left&apos;;
        } else if (sublevel.player.pos.x &gt; this.pos.x) {
          playersDirection = &apos;right&apos;;
        }
        let turnAround = false;
        if (playersDirection === &apos;left&apos; &amp;&amp; this.direction === &apos;right&apos;) {
          turnAround = true;
        } else if (playersDirection === &apos;right&apos; &amp;&amp;  this.direction === &apos;left&apos;) {
          turnAround = true;
        } else {
          turnAround = false;
        }
        if (turnAround) {
          self.speed = this.speed.times(-1);
          this.direction === &apos;right&apos; ? this.direction = &apos;left&apos; : this.direction = &apos;right&apos;;
        }
      }
    }
    if (xAxisObstacle) {
      self.speed = this.speed.times(-1);
      this.direction === &apos;right&apos; ? this.direction = &apos;left&apos; : this.direction = &apos;right&apos;;
      // this.unstick.x(this, xAxisObstacle, actorsLeftPos);
    }
    this.pos = newPos;
  }

  moveY(step, sublevel) {
    this.speed.y = 20;
    const motion = new Vector(0, this.speed.y * step);
    const newPos = this.pos.plus(motion);
    const obstacle = sublevel.obstacleAt(newPos, this.size, &apos;y&apos;);
    if (!obstacle) { this.pos = newPos; }
  }
}

export default Zombie
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
